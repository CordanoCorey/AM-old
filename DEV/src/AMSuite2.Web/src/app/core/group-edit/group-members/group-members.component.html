<div id="group-members">

  <div class="members-label">
    <label for="editor" class="control-label">Group Members:</label>
    <span class="note members-note">Click a header to select/deselect all checkboxes</span>
    <div id="members-search">
      <mat-input-container>
        <input matInput placeholder="Find account members..." maxlength="199" (keyup)="search(x.value)" #x [(ngModel)]="searchTerm">
      </mat-input-container>
      <mat-card id="search-results">
        <div *ngFor="let user of searchResults" class="search-result" (click)="selectUser(user)">{{ user.displayName }}</div>
      </mat-card>
    </div>
  </div>

  <iu-grid [model]="grid" [height]="320" [filterable]="false" [pageSize]="100">

    <iu-grid-column [model]="nameColumn" [width]="columnWidths.userName" [templateRef]="nameTemplate">
      <ng-template #nameTemplate let-userName="userName">
        <span class="cell-text">{{ userName }}</span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="emailColumn" [width]="columnWidths.email"></iu-grid-column>

    <iu-grid-column [model]="memberColumn" [width]="columnWidths.member" [templateRef]="memberTemplate">
      <ng-template #memberTemplate let-isMember="isMember" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.member - 44)/2">
          <!-- <mat-checkbox (change)="toggleMember(userId, $event)" [value]="isMember"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isMember', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="contributorColumn" [width]="columnWidths.contributor" [templateRef]="contributorTemplate">
      <ng-template #contributorTemplate let-isContributor="isContributor" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.contributor - 44)/2">
          <!-- <mat-checkbox (change)="toggleContributor(userId, $event)" [value]="isContributor"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isContributor', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="managerColumn" [width]="columnWidths.manager" [templateRef]="managerTemplate">
      <ng-template #managerTemplate let-isManager="isManager" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.manager - 44)/2">
          <!-- <mat-checkbox (change)="toggleManager(userId, $event)" [value]="isManager"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isManager', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="voterColumn" [width]="columnWidths.voter" [templateRef]="voterTemplate">
      <ng-template #voterTemplate let-isVoter="isVoter" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.voter - 44)/2">
          <!-- <mat-checkbox (change)="toggleVoter(userId, $event)" [value]="isVoter"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isVoter', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="voteTakerColumn" [width]="columnWidths.voteTaker" [templateRef]="voteTakerTemplate">
      <ng-template #voteTakerTemplate let-isVoteTaker="isVoteTaker" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.voteTaker - 44)/2">
          <!-- <mat-checkbox (change)="toggleVoteTaker(userId, $event)" [value]="isVoteTaker"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isVoteTaker', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="minuteTakerColumn" [width]="columnWidths.minuteTaker" [templateRef]="minuteTakerTemplate">
      <ng-template #minuteTakerTemplate let-isMinuteTaker="isMinuteTaker" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.minuteTaker - 44)/2">
          <!-- <mat-checkbox (change)="toggleMinuteTaker(userId, $event)" [value]="isMinuteTaker"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isMinuteTaker', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

    <iu-grid-column [model]="attendanceTakerColumn" [width]="columnWidths.attendanceTaker" [templateRef]="attendanceTakerTemplate">
      <ng-template #attendanceTakerTemplate let-isAttendanceTaker="isAttendanceTaker" let-userId="userId">
        <span class="checkbox center" [style.padding-left.px]="(columnWidths.attendanceTaker - 44)/2">
          <!-- <mat-checkbox (change)="toggleAttendanceTaker(userId, $event)" [value]="isAttendanceTaker"></mat-checkbox> -->
          <mat-checkbox [formControl]="findControl('isAttendanceTaker', userId)"></mat-checkbox>
        </span>
      </ng-template>
    </iu-grid-column>

  </iu-grid>
</div>
